import numpy as np;
import matplotlib.pyplot as plt;

bytes_ = np.array([8, 16, 32,64,128,256,512,1024,  2048,  4096, 8192,  16384,32768, 65536,  131072,  262144,  524288,  1048576,  2097152,  4194304,  8388608,  16777216,  33554432,67108864,134217728, 268435456,  536870912,  1073741824]);
times_ = np.array([0.000002227, 0.000002220, 0.000002208, 0.000002264,  0.000002326, 0.000002874, 0.000002947, 0.000003143, 0.000003528, 0.000004401, 0.000005250, 0.000007522, 0.000009473, 0.000012664, 0.000018576, 0.000029733, 0.000054280, 0.000097098, 0.000182899, 0.000354024, 0.000696321, 0.001381054, 0.002750356, 0.005488475, 0.010964902, 0.021917448, 0.064528322, 0.126549488]);

z = np.polyfit(bytes_, times_, 1);
f = np.poly1d(z);
print(f);


bytes_2 = np.array([536870912,  1073741824]);
times_2 = np.array([0.064528322, 0.126549488]);

z = np.polyfit(bytes_2, times_2, 1);
f = np.poly1d(z);
print(f);

times__ = np.array([0.000000659,0.000000278,0.000000246,0.000000248,0.000000259,0.000000309,0.000000430,0.000000532,0.000000807,0.000001206,0.000000719,0.000001142,0.000001914,0.000003272,0.000006001,0.000011421,0.000020519,0.000033447,0.000059585,0.000112774,0.000482182,0.001439213,0.002560693,0.004509925,0.008383913,0.016117406,0.031571310,0.061984828]);

plt.plot(bytes_, times_, bytes_, times__);
plt.legend(["Inter-node", "Intra-node"]);
plt.xlabel("N [Bytes]");
plt.ylabel("Time[S]")
plt.show();


times__ = np.array([0.031571310,0.061984828]);
z = np.polyfit(bytes_2, times__, 1);
f = np.poly1d(z);
print(f);




